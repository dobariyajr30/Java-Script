<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="snake_and_ladder.css">
</head>

<body>
     <div class="back_arrow">
        <a href="../snake_and_ladder/opt.html">
            <div class="back_arrow_content">
                <div>
                    <img class="back_arrow_in" src="img/Back Arrow.png" alt="">
                </div>
                <div>
                    <p>Back</p>
                </div>
            </div>
        </a>
    </div>
    <div class="main">
        <div class="game_content">
            <div class="game_content_in">
               <h3>üé≤ Snake & Ladder Game</h3>
                <p class="game-note">Touch the dice to start rolling. First to reach 100 wins! üèÅ</p>

                <table border="5" class="board">
                    <tr>
                        <td id="txtst">Start</td>
                        <td id="txt2">2</td>
                        <td id="txt3">3</td>
                        <td id="txt4">4</td>
                        <td id="txt5">5</td>
                        <td id="txt6">6</td>
                        <td id="txt7">7</td>
                        <td id="txt8">8</td>
                        <td id="txt9">9</td>
                        <td id="txt10">10</td>
                    </tr>
                    <tr>
                        <td id="txt11">11</td>
                        <td id="txt12">12</td>
                        <td id="txt13">13</td>
                        <td id="txt14">14</td>
                        <td id="txt15">15</td>
                        <td id="txt16">16</td>
                        <td id="txt17">17</td>
                        <td id="txt18">18</td>
                        <td id="txt19">19</td>
                        <td id="txt20">20</td>
                    </tr>
                    <tr>
                        <td id="txt21">21</td>
                        <td id="txt22">22</td>
                        <td id="txt23">23</td>
                        <td id="txt24">24</td>
                        <td id="txt25">25</td>
                        <td id="txt26">26</td>
                        <td id="txt27">27</td>
                        <td id="txt28">28</td>
                        <td id="txt29">29</td>
                        <td id="txt30">30</td>
                    </tr>
                    <tr>
                        <td id="txt31">31</td>
                        <td id="txt32">32</td>
                        <td id="txt33">33</td>
                        <td id="txt34">34</td>
                        <td id="txt35">35</td>
                        <td id="txt36">36</td>
                        <td id="txt37">37</td>
                        <td id="txt38">38</td>
                        <td id="txt39">39</td>
                        <td id="txt40">40</td>
                    </tr>
                    <tr>
                        <td id="txt41">41</td>
                        <td id="txt42">42</td>
                        <td id="txt43">43</td>
                        <td id="txt44">44</td>
                        <td id="txt45">45</td>
                        <td id="txt46">46</td>
                        <td id="txt47">47</td>
                        <td id="txt48">48</td>
                        <td id="txt49">49</td>
                        <td id="txt50">50</td>
                    </tr>
                    <tr>
                        <td id="txt51">51</td>
                        <td id="txt52">52</td>
                        <td id="txt53">53</td>
                        <td id="txt54">54</td>
                        <td id="txt55">55</td>
                        <td id="txt56">56</td>
                        <td id="txt57">57</td>
                        <td id="txt58">58</td>
                        <td id="txt59">59</td>
                        <td id="txt60">60</td>
                    </tr>
                    <tr>
                        <td id="txt61">61</td>
                        <td id="txt62">62</td>
                        <td id="txt63">63</td>
                        <td id="txt64">64</td>
                        <td id="txt65">65</td>
                        <td id="txt66">66</td>
                        <td id="txt67">67</td>
                        <td id="txt68">68</td>
                        <td id="txt69">69</td>
                        <td id="txt70">70</td>
                    </tr>
                    <tr>
                        <td id="txt71">71</td>
                        <td id="txt72">72</td>
                        <td id="txt73">73</td>
                        <td id="txt74">74</td>
                        <td id="txt75">75</td>
                        <td id="txt76">76</td>
                        <td id="txt77">77</td>
                        <td id="txt78">78</td>
                        <td id="txt79">79</td>
                        <td id="txt80">80</td>
                    </tr>
                    <tr>
                        <td id="txt81">81</td>
                        <td id="txt82">82</td>
                        <td id="txt83">83</td>
                        <td id="txt84">84</td>
                        <td id="txt85">85</td>
                        <td id="txt86">86</td>
                        <td id="txt87">87</td>
                        <td id="txt88">88</td>
                        <td id="txt89">89</td>
                        <td id="txt90">90</td>
                    </tr>
                    <tr>
                        <td id="txt91">91</td>
                        <td id="txt92">92</td>
                        <td id="txt93">93</td>
                        <td id="txt94">94</td>
                        <td id="txt95">95</td>
                        <td id="txt96">96</td>
                        <td id="txt97">97</td>
                        <td id="txt98">98</td>
                        <td id="txt99">99</td>
                        <td id="txtfi">Finsh</td>
                    </tr>
                </table>
                <br>
                <div class="dice_sec">

                    üé≤ Roll:
                    <input class="dice" type="button" value="0" id="btndice">
                </div>
                <br>
                <div class="player_stats">
                    üë§ You: <span id="spnst">1</span>
                    <br>
                    ü§ñ Bot: <span id="spnnd">1</span>
                </div>
            </div>
        </div>
    </div>
</body>

</html>

<script>
    let btndice = document.querySelector("#btndice");
    let c = 1, sum_player = 0, sum_bot = 0;
    let txt = new Array(101);
    let i;

    let spnnd = document.querySelector("#spnnd");
    let spnst = document.querySelector("#spnst");

    let prev_player = 0;
    let prev_bot = 0;

    for (i = 0; i <= 100; i++) {
        txt[i] = document.querySelector(`#txt${i}`);
    }

    let snakeMap = {
        27: 1, 34: 6, 47: 19, 65: 52, 87: 57, 91: 61, 97: 24, 99: 10
    };

    let ladderMap = {
        3: 22, 5: 8, 11: 26, 20: 29, 28: 55, 36: 44, 51: 72, 71: 92, 78: 98
    };

    for (let s in snakeMap) {
        if (txt[s]) {
            txt[s].classList.add("snake");
            txt[s].innerHTML += ` üêç ‚Üí ${snakeMap[s]}`;
            txt[s].title = `Snake: Go to ${snakeMap[s]}`;
        }
    }

    for (let l in ladderMap) {
        if (txt[l]) {
            txt[l].classList.add("ladder");
            txt[l].innerHTML += ` üîº ‚Üí ${ladderMap[l]}`;
            txt[l].title = `Ladder: Climb to ${ladderMap[l]}`;
        }
    }

    function jump(pos) {
        return snakeMap[pos] || ladderMap[pos] || pos;
    }

    function rollDice() {
        return Math.floor(Math.random() * 6) + 1;
    }

    function updatePosition(player, pos, prev, color) {
        if (prev > 0 && txt[prev]) txt[prev].style.backgroundColor = "";
        if (pos <= 100 && txt[pos]) txt[pos].style.backgroundColor = color;
    }

    function checkWin() {
        if (sum_player >= 100) {
            alert("üéâ You Win!");
            btndice.disabled = true;
        } else if (sum_bot >= 100) {
            alert("ü§ñ Bot Wins!");
            btndice.disabled = true;
        }
    }

    btndice.addEventListener("click", () => {
        // Player's Turn
        let playerRoll = rollDice();
        btndice.value = playerRoll;
        sum_player += playerRoll;
        sum_player = jump(sum_player);
        updatePosition("player", sum_player, prev_player, "red");
        prev_player = sum_player;
        spnst.innerHTML = sum_player;

        checkWin();

        // Disable dice to prevent multiple clicks while bot plays
        btndice.disabled = true;

        // Bot's Turn (after delay)
        setTimeout(() => {
            let botRoll = rollDice();
            sum_bot += botRoll;
            sum_bot = jump(sum_bot);
            updatePosition("bot", sum_bot, prev_bot, "blue");
            prev_bot = sum_bot;
            spnnd.innerHTML = sum_bot;

            checkWin();
            btndice.disabled = false;
        }, 1000); // 1 second delay
    });
</script>
  

<script>
    // Select all game links
    const gameLinks = document.querySelectorAll('.content_in_opt_box a');

    gameLinks.forEach(link => {
        link.addEventListener('click', function (e) {
            e.preventDefault(); // stop immediate jump

            // Add fade-out class to body
            document.body.classList.add('fade-out');

            // Wait for animation to complete (500ms) then redirect
            setTimeout(() => {
                window.location.href = this.href;
            }, 500);
        });
    });

    window.addEventListener('load', () => {
        document.body.classList.add('loaded');
    });
</script>